import pluralize from"pluralize";import normalize from"normalize-strings";import{problematic}from"./problematic.js";const own={}.hasOwnProperty,EXPRESSION_MONOSYLLABIC_ONE=new RegExp(["awe($|d|so)","cia(?:l|$)","tia","cius","cious","[^aeiou]giu","[aeiouy][^aeiouy]ion","iou","sia$","eous$","[oa]gue$",".[^aeiuoycgltdb]{2,}ed$",".ely$","^jua","uai","eau","^busi$","(?:[aeiouy](?:"+["[bcfgklmnprsvwxyz]","ch","dg","g[hn]","lch","l[lv]","mm","nch","n[cgn]","r[bcnsv]","squ","s[chkls]","th"].join("|")+")ed$)","(?:[aeiouy](?:"+["[bdfklmnprstvy]","ch","g[hn]","lch","l[lv]","mm","nch","nn","r[nsv]","squ","s[cklst]","th"].join("|")+")es$)"].join("|"),"g"),EXPRESSION_MONOSYLLABIC_TWO=new RegExp("[aeiouy](?:"+["[bcdfgklmnprstvyz]","ch","dg","g[hn]","l[lv]","mm","n[cgns]","r[cnsv]","squ","s[cklst]","th"].join("|")+")e$","g"),EXPRESSION_DOUBLE_SYLLABIC_ONE=new RegExp("(?:"+["([^aeiouy])\\1l","[^aeiouy]ie(?:r|s?t)","[aeiouym]bl","eo","ism","asm","thm","dnt","snt","uity","dea","gean","oa","ua","react?","orbed","shred","eings?","[aeiouy]sh?e[rs]"].join("|")+")$","g"),EXPRESSION_DOUBLE_SYLLABIC_TWO=new RegExp(["creat(?!u)","[^gq]ua[^auieo]","[aeiou]{3}","^(?:ia|mc|coa[dglx].)","^re(app|es|im|us)","(th|d)eist"].join("|"),"g"),EXPRESSION_DOUBLE_SYLLABIC_THREE=new RegExp(["[^aeiou]y[ae]","[^l]lien","riet","dien","iu","io","ii","uen","[aeilotu]real","real[aeilotu]","iell","eo[^aeiou]","[aeiou]y[aeiou]"].join("|"),"g"),EXPRESSION_DOUBLE_SYLLABIC_FOUR=/[^s]ia/,EXPRESSION_SINGLE=new RegExp(["^(?:"+["un","fore","ware","none?","out","post","sub","pre","pro","dis","side","some"].join("|")+")","(?:"+["ly","less","some","ful","ers?","ness","cians?","ments?","ettes?","villes?","ships?","sides?","ports?","shires?","[gnst]ion(?:ed|s)?"].join("|")+")$"].join("|"),"g"),EXPRESSION_DOUBLE=new RegExp(["^(?:"+["above","anti","ante","counter","hyper","afore","agri","infra","intra","inter","over","semi","ultra","under","extra","dia","micro","mega","kilo","pico","nano","macro","somer"].join("|")+")","(?:fully|berry|woman|women|edly|union|((?:[bcdfghjklmnpqrstvwxz])|[aeiou])ye?ing)$"].join("|"),"g"),EXPRESSION_TRIPLE=/(creations?|ology|ologist|onomy|onomist)$/g;export function syllable(e){const o=normalize(String(e)).toLowerCase().replace(/['â€™]/g,"").split(/\b/g);let i=-1,n=0;for(;++i<o.length;)n+=one(o[i].replace(/[^a-z]/g,""));return n}function one(e){let o=0;if(0===e.length)return o;if(e.length<3)return 1;if(own.call(problematic,e))return problematic[e];const i=pluralize(e,1);if(own.call(problematic,i))return problematic[i];const n=s(1),r=s(-1),a=(e=e.replace(EXPRESSION_TRIPLE,t(3)).replace(EXPRESSION_DOUBLE,t(2)).replace(EXPRESSION_SINGLE,t(1))).split(/[^aeiouy]+/);let l=-1;for(;++l<a.length;)""!==a[l]&&o++;return e.replace(EXPRESSION_MONOSYLLABIC_ONE,r).replace(EXPRESSION_MONOSYLLABIC_TWO,r),e.replace(EXPRESSION_DOUBLE_SYLLABIC_ONE,n).replace(EXPRESSION_DOUBLE_SYLLABIC_TWO,n).replace(EXPRESSION_DOUBLE_SYLLABIC_THREE,n).replace(EXPRESSION_DOUBLE_SYLLABIC_FOUR,n),o||1;function t(e){return function(){return o+=e,""}}function s(e){return function(i){return o+=e,i}}}